/*!
 * animtext.js
 * Title: animtext
 * Description: A lightweight JavaScript utility to split text into letters with animation-ready wrappers. Perfect for GSAP, cssanimation, or any custom animation workflow.
 *
 * Version: 1.1.2
 * Author: Shafayetul Islam Pavel
 * Website: https://github.com/yesiamrocks/animtext#readme
 * LinkedIn: https://www.linkedin.com/in/shafayetul/
 * Email: hello@cssanimation.io
 * GitHub: https://github.com/yesiamrocks
 *
 * © 2025 Shafayetul Islam Pavel – All rights reserved.
 */
!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";!function(){if("undefined"==typeof window)return;function t(t,n){if(!t||!n)return null;const e=document.createElement("span");e.style.visibility="hidden",e.style.position="absolute",e.className=n,document.body.appendChild(e);let i=window.getComputedStyle(e).getPropertyValue("animation-duration");if(document.body.removeChild(e),i){if(i=i.trim(),i.endsWith("ms"))return parseFloat(i);if(i.endsWith("s"))return 1e3*parseFloat(i)}return null}function n(t){if(t){const n=Number(t.trim());if(!isNaN(n))return n}return null}const e=document.createElement("style");function i(){o("gl__fx-sequence","sequence"),o("gl__fx-random","random"),o("gl__fx-reverse","reverse"),document.querySelectorAll(".cssanimation[gl__fx-word]").forEach(e=>{e._originalTextContent?e.textContent=e._originalTextContent:e._originalTextContent=e.textContent;const i=r(e.getAttribute("gl__fx-delay")||"100",100),o=(e.getAttribute("gl__fx-word")||"gl__fx-word").trim().split(/\s+/);let l=n(e.getAttribute("gl__fx-base-duration"));if(null===l&&o.length>0){const n=t(e,o[0]);null!==n&&(l=n)}null===l&&(l=1e3),e.innerHTML=s("word",e.textContent,i,o,l)}),document.querySelectorAll(".cssanimation[gl__fx-line]").forEach(e=>{e._originalTextContent?e.textContent=e._originalTextContent:e._originalTextContent=e.textContent;const i=r(e.getAttribute("gl__fx-delay")||"150",150),o=(e.getAttribute("gl__fx-line")||"gl__fx-line").trim().split(/\s+/),l="dot"===e.getAttribute("gl__fx-separator")?"dot":"br";let a=n(e.getAttribute("gl__fx-base-duration"));if(null===a&&o.length>0){const n=t(e,o[0]);null!==n&&(a=n)}null===a&&(a=1e3),e.innerHTML=s("line",e.textContent,i,o,a,l)})}function o(t,n){document.querySelectorAll(`.cssanimation[${t}]`).forEach(e=>{e._originalTextContent?e.textContent=e._originalTextContent:e._originalTextContent=e.textContent;const i=r(e.getAttribute("gl__fx-delay")||"100",100),o=(e.getAttribute(t)||"gl__fx-letter").trim().split(/\s+/),s=l(e,n,i,o);e.innerHTML=s.join("")})}function l(t,n,e,i){const o=[],r=[];t.childNodes.forEach(t=>{if(t.nodeType===Node.TEXT_NODE)r.push(...t.textContent);else if(t.nodeType===Node.ELEMENT_NODE){const r=document.createElement(t.tagName);for(const n of t.attributes)r.setAttribute(n.name,n.value);r.innerHTML=l(t,n,e,i).join(""),o.push(r.outerHTML)}});const s=r.map((t,n)=>{if(" "!==t){const o=i[n%i.length]||i[i.length-1],l=null!=e[n%e.length]?e[n%e.length]:e[e.length-1];return`<span class="gl__fx-letter ${o}" style="\n                        animation-delay:${l*n}ms;\n                        -moz-animation-delay:${l*n}ms;\n                        -webkit-animation-delay:${l*n}ms;\n                    ">${t}</span>`}return" "});if("random"===n){const t=s.filter(t=>""!==t.trim());s.filter(t=>""===t.trim());const n=t.map((t,n)=>n);!function(t){for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}}(n);const i=Array(t.length).fill("");n.forEach((n,o)=>{i[n]=t[n].replace(/animation-delay:\d+ms/g,`animation-delay:${e[e.length-1]*o}ms`)});let l=0,r=[];for(const t of s)""!==t.trim()?(r.push(i[l]),l++):r.push(t);o.push(r.join(""))}else if("reverse"===n){const t=s.filter(t=>""!==t.trim()),n=t.length,i=t.map((t,i)=>t.replace(/animation-delay:\d+ms/g,`animation-delay:${e[e.length-1]*(n-1-i)}ms`));let l=0,r=[];for(const t of s)""!==t.trim()?(r.push(i[l]),l++):r.push(t);o.push(r.join(""))}else o.push(s.join(""));return o}function r(t,n){if(!t)return[n];const e=t.trim().split(/\s+/).map(t=>{const e=Number(t);return isNaN(e)?n:e});return e.length>0?e:[n]}function s(t,n,e,i,o,l="br"){let r=[];const s=n;if("word"===t)r=s.split(/(\s+)/);else if("line"===t)if("dot"===l){const t=s.split(/(\.)/),n=[];for(let e=0;e<t.length;e++){let i=t[e].trim();""!==i&&("."!==i&&e+1<t.length&&"."===t[e+1]?(n.push(i+"."),e++):"."!==i&&n.push(i))}r=n}else r=s.split(/(\n|<br\s*\/?>)/);let a=[],u=0,d=0;return r.forEach(n=>{if(!n.trim()&&"\n"!==n&&!/<br\s*\/?>/.test(n))return void a.push(n);if("\n"===n||/<br\s*\/?>/.test(n))return void a.push(n);const l=i[u%i.length]||i[i.length-1],r=null!=e[u%e.length]?e[u%e.length]:e[e.length-1],s=d+r,f=`<span class="${"word"===t?"gl__fx-word":"gl__fx-line"} ${l}" style="\n                        animation-delay:${s}ms;\n                        -moz-animation-delay:${s}ms;\n                        -webkit-animation-delay:${s}ms;\n                    ">${n}</span>`;a.push(f),d=s+o,u++}),a.join("")}e.textContent="\n        .gl__fx-letter, .gl__fx-word, .gl__fx-line {\n            display: inline-block;\n            animation-duration: 1s;\n            animation-fill-mode: both;\n        }\n    ",document.head.appendChild(e),window.CSSAnimationLetter=window.CSSAnimationLetter||{},window.CSSAnimationLetter.init=i,window.addEventListener("DOMContentLoaded",()=>{i()})}()});
